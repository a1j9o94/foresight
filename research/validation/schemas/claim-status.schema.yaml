# Schema for rolled-up claim status
# Generated by rollup_status.py

type: object
required:
  - claims
  - questions
  - overall
  - generated_at

properties:
  claims:
    type: object
    properties:
      c1_vlm_latent_sufficiency:
        $ref: "#/$defs/experiment_status"
      c2_adapter_bridging:
        $ref: "#/$defs/experiment_status"
      c3_future_prediction:
        $ref: "#/$defs/experiment_status"
      c4_pixel_verification:
        $ref: "#/$defs/experiment_status"

  questions:
    type: object
    properties:
      q1_latent_alignment:
        $ref: "#/$defs/experiment_status"
      q2_information_preservation:
        $ref: "#/$defs/experiment_status"
      q3_temporal_coherence:
        $ref: "#/$defs/experiment_status"
      q4_training_data:
        $ref: "#/$defs/experiment_status"
      q5_prediction_horizon:
        $ref: "#/$defs/experiment_status"

  overall:
    type: object
    required:
      - claims_validated
      - questions_answered
      - current_phase
    properties:
      claims_validated:
        type: string
        pattern: "^[0-4]/4$"
      questions_answered:
        type: string
        pattern: "^[0-5]/5$"
      current_phase:
        type: integer
        minimum: 1
        maximum: 4
      next_gate:
        type: string
      blockers:
        type: array
        items:
          type: string
      requires_human_review:
        type: array
        items:
          type: object
          properties:
            experiment:
              type: string
            reason:
              type: string

  generated_at:
    type: string
    format: date-time

$defs:
  experiment_status:
    type: object
    required:
      - status
    properties:
      status:
        type: string
        enum: [not_started, in_progress, completed, blocked, failed, pivoted]
      success:
        type: boolean
      progress:
        type: string
        pattern: "^[0-9]+%$"
      current_experiment:
        type: string
      metrics:
        type: object
        additionalProperties:
          type: number
      blocked_by:
        type: string
      last_updated:
        type: string
        format: date-time
      notes:
        type: string
